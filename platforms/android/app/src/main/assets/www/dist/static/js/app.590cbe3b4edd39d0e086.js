webpackJsonp([1],{"8O08":function(e,t){},EwZy:function(e,t){},MXkr:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),r=a("sUu7"),n=new s.a,i=a("//Fk"),o=a.n(i),l=a("mtWM"),c=a.n(l),d=function(e){n.$emit("global-message",{text:e,type:"error"})},u=function(e){n.$emit("global-message",{text:e,type:"info"})},m=a("TXmL");s.a.use(m.a);var v=new m.a({locale:"jp",messages:{en:{General:{loadingData:"Loading.."},Login:{title:"Please log in",username:"Username",password:"Password",createAccount:"Create account",login:"Login",toggleLanguage:"日本語",forgotPassword:"For your password ? Click Here"},Community:{title:"Community",newAdvertisementModalTitle:"New advertisement",searchHint:"Type text here"},AdList:{adType:{WANT:"WANT",GIVE:"GIVE"},noAds:"No advertisements found"},Wallet:{title:"Wallet",balance:"Balance",empty:"You don't have any coins yet. You may receive some from your community administrator or by helping members of your community.",pendingTransaction:"Pending"},Ad:{addPhoto:"Add photo",sendMessage:"Send Message",pay:"Pay for service"},UploadPhoto:{resize:"Resize photo"},CropPhoto:{done:"Use photo"},Messages:{title:"Messages",createGroupModalTitle:"Create group chat",noMessagesInThread:"No messages yet",noMessageThreads:"No messages yet"},CreateGroup:{title:"Group title (optional)",create:"Create",createHint:"You can add more members later."},SelectGroupMembers:{selectMembers:"Type names of members",noMembersSelected:"Please select at least one member",searchResultEmpty:"Specified name not found"},EditGroup:{owner:"(group owner)",title:"Title",saveHint:"You can discard changes by clicking on the cross of upper toolbar",save:"Save"},MessageThread:{title:"Message thread",message:"Message",send:"Send",pay:"Pay",makePaymentModalTitle:"Pay for service",editGroupModalTitle:"Edit group"},Profile:{addPhoto:"Add photo",logout:"Logout"},EditProfile:{title:"Edit profile",username:"ユーザー名",emailAddress:"メールアドレス",firstName:"First name",lastName:"Last name",description:"Describe yourself",location:"Enter your region",deleteDialog:"Your account will be deleted.\nAre you sure？",cancel:"Cancel"},OtherUserProfile:{makeTopup:"Top-up",makePayment:"Make payment",makeTopupModalTitle:"Top-up community member",makePaymentModalTitle:"Make payment",makeTopupDefaultDescription:"Funds from municipality"},Payment:{title:"Make payment",description:"Ad: {title}"},CreateAccount:{title:"Create account",username:"Username",email:"Email",emailHint:"Email",usernameHint:"At least 4 characters",password:"Password",passwordHint:"At least 8 characters",password2:"Repeat password",password2Hint:"At least 8 characters",firstName:"First name",lastName:"Last name",description:"Describe yourself",community:"Community",location:"Enter your region",createButton:"Create",createHint:"You can add your avatar photo on the next screen"},EmailVerification:{hintStart:"We have sent a verification email to your email address.\nAccount will not be created until the URL in the verification email is clicked.",hintSuccess:"Your email address has been confirmed.",ok:"OK",startApp:"Start App"},AppBottomNav:{wallet:"Wallet",community:"Community",messages:"Messages",profile:"Profile",admin:"Admin"},validation:{messages:{required:"Required field",numeric:"Value must be numeric",decimal:"Value must be decimal",min:"Too short",email:"Email is not correct",min_value:"Value too small",max_value:"Value too big",_default:"Value is not correct"}},error:{outOfEther:"To continue your community needs more ether",usernameTaken:"Username is already taken",notEnoughFunds:"Not enough funds"},AdCreate:{type:"Type",adType:{WANT:"Want",GIVE:"Give"},title:"Title",description:"Description",points:"Coins",location:"Location",createHint:"Your ad will be published. You can add photo on the next screen.",createButton:"Add"},AdEdit:{updateButton:"Update",deleteButton:"Delete"},PasswordResetEmail:{emailHint:"We will send you a link to the password settings screen, so please enter your registered email address.",emailAddress:"Email Address",emailSent:"Your password settings screen URL has been sent."},PasswordResetInput:{inputHint:"Please enter a new password",pass:"Password",passConfirm:"Confirm Password",resetHint:"New password has been set"},SearchUser:{search:"Find user by name"}},jp:{General:{loadingData:"Loading.."},Login:{title:"ログインしてください",username:"ユーザー名",password:"パスワード",createAccount:"アカウント作成",login:"ログイン",toggleLanguage:"English",forgotPassword:"パスワードを忘れた方はこちら"},Community:{title:"コミュニティ",newAdvertisementModalTitle:"新しく告知をする",searchHint:"検索テキストを入力してください"},AdList:{adType:{WANT:"ほしい",GIVE:"できる"},noAds:"告知が存在しません。"},Wallet:{title:"ウォレット",balance:"残ポイント",empty:"ポイントが不足しています",pendingTransaction:"Pending"},Ad:{addPhoto:"写真追加",sendMessage:"メッセージ送信",pay:"支払いをする"},UploadPhoto:{resize:"Resize photo"},CropPhoto:{done:"Use photo"},Messages:{title:"メッセージ",createGroupModalTitle:"グループチャットを作成する",noMessagesInThread:"メッセージがありません",noMessageThreads:"No messages yet"},CreateGroup:{title:"グループチャットタイトル",create:"作成",createHint:"メンバーはあとからでも追加できます。"},SelectGroupMembers:{selectMembers:"追加するメンバーの名前を入力してください",noMembersSelected:"メンバーを選んでください",searchResultEmpty:"メンバーが見つかりません"},EditGroup:{owner:"(グループオーナー)",title:"タイトル",saveHint:"You can discard changes by clicking on the cross of upper toolbar",save:"保存"},MessageThread:{title:"スレッド",message:"メッセージ",send:"送信",pay:"支払い",makePaymentModalTitle:"支払いをする"},Profile:{addPhoto:"写真追加",logout:"ログアウト"},EditProfile:{title:"プロフィール編集",username:"ユーザー名",emailAddress:"メールアドレス",firstName:"名前",lastName:"名字",description:"自己紹介",location:"お住まいの地域",deleteDialog:"アカウントを削除します。\nよろしいですか？",cancel:"キャンセル"},OtherUserProfile:{makeTopup:"支払い",makePayment:"支払いをする",makeTopupModalTitle:"支払い",makePaymentModalTitle:"支払いをする",makeTopupDefaultDescription:"commons incから自動付与"},Payment:{title:"支払いをする",description:"支払いを行います"},CreateAccount:{title:"アカウントを作成する",username:"ユーザー名",email:"メールアドレス",emailHint:"メールアドレス",usernameHint:"４文字以上にしてください",password:"パスワード",passwordHint:"８文字以上にしてください",password2:"パスワード確認",password2Hint:"８文字以上にしてください",firstName:"名前",lastName:"名字",description:"自己紹介",community:"コミュニティ",location:"お住いの地域",createButton:"作成",createHint:"写真は次のページで追加できます。"},EmailVerification:{hintStart:"指定のメールアドレスへ確認のメールを送信いたしました。\n確認のメールにありますURLがクリックされるまで、アカウントは作成されません。",hintSuccess:"メールアドレスが確認されました。",ok:"OK",startApp:"アプリを開く"},AppBottomNav:{wallet:"ウォレット",community:"コミュニティ",messages:"メッセージ",profile:"プロフィール",admin:"管理者"},validation:{messages:{required:"必須項目",numeric:"半角数字のみ",decimal:"半角数字で入力してください",min:"短すぎます",email:"Emailアドレスが間違っています",min_value:"値が小さすぎます",max_value:"値が大きすぎます",_default:"入力値が適切ではありません"}},error:{outOfEther:"コミュニティにCOMが不足しています",usernameTaken:"このユーザー名はすでに使われています",notEnoughFunds:"残高が足りません"},AdCreate:{type:"タイプ",adType:{WANT:"ほしい",GIVE:"できる"},title:"タイトル",description:"説明",points:"コイン",location:"地域",createHint:"あなたの告知が作成されます。写真を次のページで追加してください",createButton:"追加"},AdEdit:{updateButton:"更新",deleteButton:"削除"},PasswordResetEmail:{emailHint:"パスワード設定画面へのリンクをお送りしますのでご登録のメールアドレスを入力してください。",emailAddress:"メールアドレス",emailSent:"パスワード設定画面URLが送信されました。"},PasswordResetInput:{inputHint:"新しいパスワードを入力してください",pass:"パスワード",passConfirm:"パスワード（確認）",resetHint:"新しいパスワードが設定されました"},SearchUser:{search:"Find user by name"}}}}),p=null,h=c.a.create({baseURL:"https://app.test.commons.love/api"}),f=h;h.interceptors.request.use(function(e){return"post"===e.method&&p&&(e.headers[e.xsrfHeaderName]=p),function(e){return e.noLoader?e:(e.loaderTimer=setTimeout(function(){n.$emit("show-loader")},500),e)}(e)},function(e){return o.a.reject(e)}),h.interceptors.response.use(function(e){return function(e){var t,a,s,r=e.headers["set-cookie"];if(r&&r.length){var n=(t=r[0],a=e.config.xsrfCookieName,(s=t.match(new RegExp("(^| \\s*)("+a+")=([^;]*)")))?decodeURIComponent(s[3]):null);n&&(p=n)}}(e),g(e.config),e},function(e){return g(e.config),_(e)});var _=function(e){return 401===e.response.status?(b.logout(),o.a.reject(e)):468===e.response.status?(d(v.t(e.response.data.key)),o.a.reject(e.response.data)):(d("Service not available"),o.a.reject(e))};function g(e){e.noLoader||(clearTimeout(e.loaderTimer),n.$emit("hide-loader"))}var y={interval:void 0,count:0,checkForUnreadThreads:function(){var e=this;f.get("/message-threads/unread-count",{noLoader:!0}).then(function(t){e.count=t.data.count,n.$emit("unread-messages-count",e.count)})},start:function(){var e=this;this.checkForUnreadThreads(),this.interval=setInterval(function(){return e.checkForUnreadThreads()},3e4)},stop:function(){clearInterval(this.interval)}},b={_user:null,user:function(){return this._user},login:function(e,t){var a=this;return f.post("/login",{username:e,password:t}).then(function(e){a.setUser(e.data),y.start(),window.$router.push("/community")})},createAndLogin:function(e){return f.post("/create-account",e).then(function(e){window.$router.push("/email-verification")})},logout:function(){var e=this;return f.post("/logout").then(function(){e.setUser(null),y.stop(),window.$router.push("/login")})},setUser:function(e){this._user=e,n.$emit("userChanged",this._user)},setUserAdmin:function(e){this._user.admin=e},loadUser:function(){var e=this;return f.get("user").then(function(t){e.setUser(t.data)}).catch(function(){})},isLoggedIn:function(){return!!this._user}},w={created:function(){var e=this;n.$on("global-message",function(t){return e.showMessage(t.type,t.text)})},watch:{$route:function(){"red"===this.color&&(this.visible=!1)}},data:function(){return{visible:!1,timeout:5e3,message:"",color:""}},methods:{showMessage:function(e,t){this.color="error"===e?"red":"blue",this.timeout="error"===e?1e8:5e3,this.message=t,this.visible=!0}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",{attrs:{id:"snackbar",timeout:e.timeout,color:e.color,light:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v("\n  "+e._s(e.message)+"\n  "),a("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.visible=!1}}},[e._v("Close")])],1)},staticRenderFns:[]},k=a("VU/8")(w,x,!1,null,null,null).exports,$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{attrs:{fixed:"",app:"","extension-height":"48"}},[e._t("left"),e._v(" "),a("v-toolbar-title",[e._v(e._s(e.title))]),e._v(" "),a("v-spacer"),e._v(" "),e._t("default",null,{slot:"default"}),e._v(" "),e._t("extension",null,{slot:"extension"})],2)],1)},staticRenderFns:[]},A=a("VU/8")({props:["title"]},$,!1,null,null,null).exports,C={data:function(){return{user:b.user()}},methods:{onUserChanged:function(e){this.user=e}},created:function(){n.$on("userChanged",this.onUserChanged)},destroyed:function(){n.$off("userChanged",this.onUserChanged)}},U={mixins:[C],props:["title"],data:function(){return{messageCount:0,messageCountVisible:!1}},methods:{setCount:function(e){this.messageCount=e,this.messageCountVisible=e>0}},created:function(){var e=this;this.renderer=setInterval(function(){e.$forceUpdate()},1e3),this.setCount(y.count),n.$on("unread-messages-count",this.setCount)},destroyed:function(){clearInterval(this.renderer)}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-bottom-nav",{attrs:{fixed:"",value:!0}},[a("v-btn",{attrs:{flat:"",to:"/wallet"}},[a("span",[e._v(e._s(e.$t("AppBottomNav.wallet")))]),e._v(" "),a("v-icon",[e._v("account_balance_wallet")])],1),e._v(" "),a("v-btn",{attrs:{flat:"",to:"/community"}},[a("span",[e._v(e._s(e.$t("AppBottomNav.community")))]),e._v(" "),a("v-icon",[e._v("people")])],1),e._v(" "),a("v-btn",{attrs:{flat:"",to:"/messages"}},[a("span",[e._v(e._s(e.$t("AppBottomNav.messages")))]),e._v(" "),a("v-badge",{attrs:{right:""},model:{value:e.messageCountVisible,callback:function(t){e.messageCountVisible=t},expression:"messageCountVisible"}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[e._v(e._s(e.messageCount))]),e._v(" "),a("v-icon",[e._v("message")])],1)],1),e._v(" "),a("v-btn",{attrs:{flat:"",to:"/profile"}},[a("span",[e._v(e._s(e.$t("AppBottomNav.profile")))]),e._v(" "),a("v-icon",[e._v("person")])],1),e._v(" "),e.user&&e.user.admin?a("v-btn",{attrs:{flat:"",to:"/admin"}},[a("span",[e._v(e._s(e.$t("AppBottomNav.admin")))]),e._v(" "),a("v-icon",[e._v("build")])],1):e._e()],1)},staticRenderFns:[]};var j=a("VU/8")(U,P,!1,function(e){a("c7wr")},null,null).exports,I={data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1}},created:function(){n.$on("show-loader",this.show),n.$on("hide-loader",this.hide)},destroyed:function(){n.$off("show-loader",this.show),n.$off("hide-loader",this.hide)}},E={render:function(){var e=this.$createElement;return(this._self._c||e)("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticStyle:{position:"absolute",top:"0px","margin-top":"0","z-index":"2000","background-color":"white"},attrs:{indeterminate:!0,height:"4"}})},staticRenderFns:[]},T={components:{AppToolbar:A,AppBottomNav:j,GlobalNotification:k,Loader:a("VU/8")(I,E,!1,null,null,null).exports},created:function(){String(this.$router.currentRoute.path).startsWith("/create-account/")||String(this.$router.currentRoute.path).startsWith("/passwordreset/")||b.loadUser().then(function(){return y.start()})}},M={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("v-content",[t("router-view")],1),this._v(" "),t("global-notification"),this._v(" "),t("Loader")],1)},staticRenderFns:[]},N=a("VU/8")(T,M,!1,null,null,null).exports,S=a("/ocq"),R={name:"Login",data:function(){return{username:"",password:"",error:null,kagaUsers:{worker:"secret00",elderly1:"secret00",elderly2:"secret00",admin:"secret00"},shibuyaUsers:{admin2:"secret02"},commonsIncUsers:{admin3:"secret03"},showTestUsernames:!1}},methods:{login:function(){var e=this;this.$validator.validateAll().then(function(t){t&&b.login(e.username,e.password).catch(function(t){return e.error="Invalid username or password"})})},setUser:function(e,t){this.username=e,this.password=t},toggleLanguage:function(){var e="en"===this.$i18n.locale?"jp":"en";this.$i18n.locale=e;this.$moment.locale({jp:"ja",en:"en"}[e])}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticStyle:{height:"100%"}},[a("v-toolbar",{attrs:{app:"",dark:"",color:"primary"}},[a("v-toolbar-title",[e._v(e._s(e.$t("Login.title")))]),e._v(" "),a("v-spacer")],1),e._v(" "),e.error?a("v-alert",{attrs:{type:"error",value:"true"}},[e._v(e._s(e.error))]):e._e(),e._v(" "),a("v-card-text",[a("v-form",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"person",label:e.$t("Login.username"),type:"text","error-messages":e.errors.collect("username"),"data-vv-name":"username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"lock",label:e.$t("Login.password"),type:"password","error-messages":e.errors.collect("password"),"data-vv-name":"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("v-layout",{attrs:{"align-end":"","justify-end":""}},[a("v-btn",{attrs:{flat:"",right:"",color:"red",to:"/passwordresetemail"}},[e._v(e._s(e.$t("Login.forgotPassword")))])],1)],1),e._v(" "),e.showTestUsernames?a("div",[a("small",[e._v("Kaga community:\n        "),e._l(e.kagaUsers,function(t,s){return a("span",[a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),e.setUser(s,t)}}},[e._v(e._s(s))]),e._v(" |\n        ")])})],2),e._v(" "),a("br"),e._v(" "),a("small",[e._v("Shibuya community:\n        "),e._l(e.shibuyaUsers,function(t,s){return a("span",[a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),e.setUser(s,t)}}},[e._v(e._s(s))]),e._v(" |\n        ")])})],2),e._v(" "),a("br"),e._v(" "),a("small",[e._v("Commons Inc community:\n        "),e._l(e.commonsIncUsers,function(t,s){return a("span",[a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),e.setUser(s,t)}}},[e._v(e._s(s))]),e._v(" |\n        ")])})],2)]):e._e()],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary",to:"/create-account"}},[e._v(e._s(e.$t("Login.createAccount")))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){t.preventDefault(),e.login()}}},[e._v(e._s(e.$t("Login.login")))])],1),e._v(" "),a("v-card-text",[a("p",{staticClass:"text-xs-center ma-2"},[a("a",{attrs:{href:"#"},on:{click:function(t){e.toggleLanguage()}}},[e._v(e._s(e.$t("Login.toggleLanguage")))])])])],1)},staticRenderFns:[]},q=a("VU/8")(R,V,!1,null,null,null).exports,L=a("woOf"),F=a.n(L),D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-avatar",[a("img",{attrs:{src:e.user.avatarUrl||e.defaultAvatar},on:{click:function(t){t.preventDefault(),e.showProfile(e.user)}}})])},staticRenderFns:[]},G=a("VU/8")({props:["user"],data:function(){return{defaultAvatar:"/static/avatar-placeholder.png"}},methods:{showProfile:function(e){this.$router.push("/profile/"+e.id)}}},D,!1,null,null,null).exports,B={props:["title"],created:function(){var e=this;setTimeout(function(){return e.show=!0},0)},data:function(){return{show:!1}},methods:{close:function(e){this.show=!1,this.$emit("close",e)}},mounted:function(){var e=this;document.addEventListener("keydown",function(t){e.show&&27===t.keyCode&&e.close()})}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition",overlay:!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[a("v-toolbar",[a("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){e.close()}}},[a("v-icon",[e._v("close")])],1),e._v(" "),a("v-toolbar-title",[e._v(e._s(e.title))]),e._v(" "),a("v-spacer"),e._v(" "),e._t("right",null,{slot:"default"})],2),e._v(" "),e._t("default",null,{close:e.close})],2)],1)},staticRenderFns:[]},O=a("VU/8")(B,H,!1,null,null,null).exports,z={props:["closeModal","communityId","adId","description","amount","beneficiary","user"],name:"MakePayment",data:function(){return{loading:!1,transaction:{communityId:this.communityId,description:this.description,amount:this.amount,beneficiaryId:this.beneficiary.id}}},methods:{makePayment:function(){var e=this;this.$validator.validateAll().then(function(t){t&&confirm("Transfer "+e.transaction.amount+" coins to "+e.beneficiary.username+"?")&&(e.loading=!0,e.user.admin||(e.transaction.adId=e.adId),f.post("/transactions",e.transaction).then(function(){b.loadUser().then(function(){b.setUserAdmin(!0)}),u("Transfered "+e.transaction.amount+" coins to "+e.beneficiary.username),e.closeModal()}).catch(function(t){e.loading=!1}))})}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{on:{submit:function(t){t.preventDefault(),e.makePayment()}}},[a("v-card-text",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"description",label:"Description",type:"text","error-messages":e.errors.collect("description"),"data-vv-name":"description"},model:{value:e.transaction.description,callback:function(t){e.$set(e.transaction,"description",t)},expression:"transaction.description"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{name:"amount",label:"Amount",type:"text","error-messages":e.errors.collect("amount"),"data-vv-name":"amount"},model:{value:e.transaction.amount,callback:function(t){e.$set(e.transaction,"amount",t)},expression:"transaction.amount"}}),e._v(" "),a("v-text-field",{attrs:{name:"beneficiary",label:"Beneficiary",type:"text",readonly:""},model:{value:e.beneficiary.username,callback:function(t){e.$set(e.beneficiary,"username",t)},expression:"beneficiary.username"}})],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"submit-btn",attrs:{right:"",type:"submit",color:"primary",disabled:e.loading}},[e._v("Make payment")])],1)],1)},staticRenderFns:[]},X=a("VU/8")(z,W,!1,null,null,null).exports,Y={name:"SelectGroupMembers",props:["existingMembers","memberSelected","communityId"],components:{Avatar:G},data:function(){return{users:[],filter:"",search:null,selected:[]}},watch:{search:function(e){e&&this.communityId&&this.loadUsers(e)},selected:function(e){var t=this.includeExistingUsers(e);this.memberSelected&&this.memberSelected(t)}},methods:{isNewMember:function(e){return!this.existingMembers.find(function(t){return t.id===e.id})},includeExistingUsers:function(e){return this.existingMembers.forEach(function(t){e.find(function(e){return e.id===t.id})||e.push(t)}),e},loadUsers:function(e){var t=this;f.get("/users?communityId="+this.communityId+"&q="+encodeURI(e)).then(function(e){t.users=e.data})}},created:function(){this.selected=this.existingMembers,this.users=this.existingMembers}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-select",{attrs:{items:e.users,rules:[function(){return e.selected.length>0||e.$t("SelectGroupMembers.noMembersSelected")}],"search-input":e.search,chips:"","deletable-chips":"","item-text":"username","item-value":"id","return-object":"",label:e.$t("SelectGroupMembers.selectMembers"),autocomplete:"",multiple:"","cache-items":""},on:{"update:searchInput":function(t){e.search=t}},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("v-chip",{key:JSON.stringify(t.item),staticClass:"chip--select-multi",attrs:{selected:t.selected,close:e.isNewMember(t.item)},on:{input:function(e){t.parent.selectItem(t.item)}}},[a("avatar",{attrs:{user:t.item}}),e._v("\n      "+e._s(t.item.username)+"\n    ")],1)]}},{key:"item",fn:function(t){return["object"!=typeof t.item?[e._v("\n      "+e._s(e.$t("SelectGroupMembers.searchResultEmpty"))+"\n    ")]:[a("v-list-tile-avatar",[a("avatar",{attrs:{user:t.item}})],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.username)}})],1)]]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},staticRenderFns:[]},J=a("VU/8")(Y,K,!1,null,null,null).exports,Q={name:"EditGroup",mixins:[C],components:{SelectGroupMembers:J},props:["closeModal","thread"],data:function(){return{localThread:null}},methods:{memberSelected:function(e){this.localThread.parties=e},updateGroup:function(){var e=this,t={memberIds:this.localThread.parties.map(function(e){return e.id}),title:this.localThread.title};f.post("/message-threads/"+this.thread.id+"/group",t).then(function(t){return e.closeModal(t.data)})}},created:function(){this.localThread=F()({},this.thread),this.owner=this.thread.creator}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",[a("v-card-text",[a("div",{staticClass:"mb-2"},[a("v-chip",[a("v-avatar",[a("img",{attrs:{src:e.owner.avatarUrl}})]),e._v("\n        "+e._s(e.owner.username)+"\n      ")],1),e._v(" "),a("small",[e._v(e._s(e.$t("EditGroup.owner")))])],1),e._v(" "),a("select-group-members",{attrs:{"existing-members":e.thread.parties,"member-selected":e.memberSelected}}),e._v(" "),a("v-text-field",{attrs:{label:e.$t("EditGroup.title"),type:"text"},model:{value:e.localThread.title,callback:function(t){e.$set(e.localThread,"title",t)},expression:"localThread.title"}})],1),e._v(" "),a("v-card-actions",[a("small",{staticStyle:{"text-align":"right",color:"#555","padding-right":"20px"}},[e._v(e._s(e.$t("EditGroup.saveHint")))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",right:""},on:{click:function(t){e.updateGroup()}}},[e._v("\n      "+e._s(e.$t("EditGroup.save"))+"\n    ")])],1)],1)},staticRenderFns:[]},ee={name:"MessageThread",components:{AppToolbar:A,Avatar:G,Modal:O,MakePayment:X,EditGroup:a("VU/8")(Q,Z,!1,null,null,null).exports},mixins:[C],props:["threadId"],beforeRouteEnter:function(e,t,a){o.a.all([f.get("/message-threads/"+e.params.threadId),f.get("/message-threads/"+e.params.threadId+"/messages")]).then(function(e){a(function(t){t.setThread(e[0].data),t.messages=e[1].data,t.scrollToEnd()})})},data:function(){return{ad:{},makePayment:!1,thread:{},messages:[],messageText:"",editingGroup:!1}},computed:{payable:function(){return this.ad&&this.ad.payable},isGroup:function(){return this.thread&&this.thread.group},participants:function(){return this.hasData()?this.thread.group?this.thread.parties.map(function(e){return e.username}).join(", "):this.thread.counterParty.username:""}},methods:{hasData:function(){return this.thread&&this.thread.parties},setThread:function(e){this.thread=e,this.ad=e.ad},loadMessages:function(){var e=this;return f.get("/message-threads/"+this.threadId+"/messages",{noLoader:!0}).then(function(t){return e.messages=t.data})},sendMessage:function(){if(""!==this.messageText){var e={text:this.messageText,createdBy:this.user.id,createdAt:null};this.messages.push(e);var t={threadId:this.threadId,text:this.messageText};f.post("/message-threads/"+this.threadId+"/messages",t).then(function(t){return F()(e,t.data)}),this.messageText="",this.scrollToEnd()}},scrollToEnd:function(){var e=this;this.$nextTick(function(){e.$vuetify.goTo(e.$refs.messageInput,{duration:400})})},my:function(e){return this.user.id===e.createdBy},userById:function(e){return this.thread&&this.thread.creator?e===this.thread.creator.id?this.thread.creator:this.thread.parties.find(function(t){return t.id===e}):{}},pollMessages:function(){var e=this;this.threadRefresh=setInterval(function(){return e.loadMessages()},5e3)},editGroupFinished:function(e){e&&this.setThread(e),this.editingGroup=!1}},created:function(){this.pollMessages()},destroyed:function(){clearInterval(this.threadRefresh)}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-toolbar",{attrs:{title:e.participants}},[a("v-btn",{attrs:{slot:"left",icon:""},on:{click:function(t){e.$router.back()}},slot:"left"},[a("v-icon",[e._v("arrow_back")])],1),e._v(" "),a("v-toolbar-title",{staticStyle:{width:"100%"},attrs:{slot:"extension"},slot:"extension"},[e._v("\n      "+e._s(e.thread.title)+"\n    ")]),e._v(" "),e.isGroup?a("div",{attrs:{slot:"extension"},slot:"extension"},[a("v-btn",{attrs:{flat:"",icon:"",small:"",color:"grey"},on:{click:function(t){e.editingGroup=!0}}},[a("v-icon",[e._v("info")])],1)],1):e._e(),e._v(" "),e.ad?a("div",{attrs:{slot:"extension"},slot:"extension"},[a("v-btn",{attrs:{flat:"",icon:"",small:"",color:"grey",to:"/community/ad/"+e.ad.id}},[a("v-icon",[e._v("info")])],1)],1):e._e(),e._v(" "),e.payable?a("div",{staticClass:"mr-2",attrs:{slot:"extension"},slot:"extension"},[a("v-btn",{staticStyle:{width:"66px","min-width":"66px"},attrs:{flat:"",color:"primary"},on:{click:function(t){e.makePayment=!0}}},[a("v-icon",{staticClass:"pr-2"},[e._v("account_balance_wallet")]),e._v("\n        "+e._s(e.$t("MessageThread.pay"))+"\n      ")],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"messages-list pt-3"},[e._l(e.messages,function(t,s){return[a("v-layout",{staticClass:"message-wrapper",class:{me:e.my(t),them:!e.my(t),"same-sender-as-previous":s>0&&e.messages[s-1].createdBy===t.createdBy,"next-will-also-be-from-this-sender":s<e.messages.length-1&&e.messages[s+1].createdBy===t.createdBy},attrs:{"mb-2":""}},[a("v-flex",{staticClass:"avatar-wrapper"},[t.createdBy?a("avatar",{attrs:{user:e.userById(t.createdBy)}}):e._e()],1),e._v(" "),a("v-flex",{staticClass:"message-content-wrapper"},[a("div",{staticClass:"text-wrapper",domProps:{innerHTML:e._s(t.text)}}),e._v(" "),t.createdAt?a("div",{staticClass:"grey--text caption message-time mt-1"},[e._v(e._s(e._f("moment")(t.createdAt,"from"))+"\n          ")]):a("v-progress-linear",{attrs:{indeterminate:!0}})],1)],1)]})],2),e._v(" "),a("v-card",{staticClass:"chat-text-input",attrs:{color:"grey",flat:""}},[a("v-card-text",{staticStyle:{padding:"0"}},[a("form",{on:{submit:function(t){t.preventDefault(),e.sendMessage()}}},[a("v-text-field",{attrs:{label:e.$t("MessageThread.message"),type:"text",flat:"",solo:"",rows:"2","multi-line":"",autofocus:""},model:{value:e.messageText,callback:function(t){e.messageText=t},expression:"messageText"}}),e._v(" "),a("v-btn",{attrs:{type:"submit",small:"",absolute:"",top:"",right:"",fab:"",color:"primary"}},[a("v-icon",[e._v("send")])],1)],1)])],1),e._v(" "),a("div",{ref:"messageInput"}),e._v(" "),e.makePayment?a("modal",{attrs:{title:e.$t("MessageThread.makePaymentModalTitle")},on:{close:function(t){e.makePayment=!1}},scopedSlots:e._u([{key:"default",fn:function(t){return a("make-payment",{attrs:{amount:e.ad.points,beneficiary:e.thread.counterParty,ad:e.ad,description:e.$t("Payment.description",{title:e.ad.title}),closeModal:t.close}})}}])}):e._e(),e._v(" "),e.editingGroup?a("modal",{attrs:{title:e.$t("MessageThread.editGroupModalTitle")},on:{close:e.editGroupFinished},scopedSlots:e._u([{key:"default",fn:function(t){return a("edit-group",{attrs:{thread:e.thread,closeModal:t.close}})}}])}):e._e()],1)},staticRenderFns:[]},ae=a("VU/8")(ee,te,!1,null,null,null).exports;var se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1600;return new o.a(function(a,s){var r=new Image;r.src=e,r.onload=function(){a(function(e,t){var a=document.createElement("canvas"),s=t,r=e.width,n=e.height;return r>n?r>s&&(n*=s/r,r=s):n>s&&(r*=s/n,n=s),a.width=r,a.height=n,a.getContext("2d").drawImage(e,0,0,r,n),a.toDataURL("image/jpeg")}(r,t))}})},re={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("vue-croppie",{ref:"croppieRef",attrs:{enableOrientation:!0,enableExif:!0,viewport:{width:280,height:210}},on:{result:this.result}})],1)},staticRenderFns:[]};var ne={props:["url","onUpload"],components:{Modal:O,CropPhoto:a("VU/8")({props:["url","closeModal","orientation"],mounted:function(){this.$refs.croppieRef.bind({url:this.url,orientation:this.orientation})},methods:{usePhoto:function(){this.$refs.croppieRef.result({format:"jpeg",size:"original"})},result:function(e){this.$emit("cropped",e)}}},re,!1,function(e){a("pWNq")},null,null).exports},data:function(){return{selectedPhotoUrl:null,showCrop:!1,orientation:1}},methods:{photoSelected:function(e){var t=this,a=new FileReader;a.onload=function(){var e=new Image;e.src=a.result,e.onload=function(){EXIF.getData(e,function(){var e=EXIF.getAllTags(this);t.selectedPhotoUrl=a.result,t.orientation=e.Orientation,t.showCrop=!0,t.$refs.fileinput.value=""})}},a.readAsDataURL(e.target.files[0])},selectPhoto:function(){this.$refs.fileinput.dispatchEvent(new MouseEvent("click"))},cropped:function(e){var t=this;this.showCrop=!1,se(e).then(function(e){return f.post(t.url,e).then(function(e){return t.onUpload(e.data)})})},closeCropPhotoDialog:function(){this.showCrop=!1}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showCrop?a("modal",{attrs:{title:e.$t("UploadPhoto.resize")},on:{close:e.closeCropPhotoDialog},scopedSlots:e._u([{key:"default",fn:function(t){return a("crop-photo",{ref:"cropPhoto",attrs:{url:e.selectedPhotoUrl,orientation:e.orientation,closeModal:t.close},on:{cropped:e.cropped}})}}])},[a("v-btn",{attrs:{slot:"right",icon:""},on:{click:function(t){e.$refs.cropPhoto.usePhoto()}},slot:"right"},[a("v-icon",[e._v("check")])],1)],1):e._e(),e._v(" "),a("div",{on:{click:e.selectPhoto}},[e._t("activator")],2),e._v(" "),a("input",{ref:"fileinput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",tabindex:"-1"},on:{change:e.photoSelected}})],1)},staticRenderFns:[]},oe=a("VU/8")(ne,ie,!1,null,null,null).exports,le={name:"AdEdit",props:["closeModal","ad"],components:{UploadPhoto:oe},data:function(){return{loading:!1}},methods:{adPhotoOrPlaceHolder:function(){return this.ad?this.ad.photoUrl?this.ad.photoUrl:this.ad.own?"":"/static/temp/ad-placeholder.png":""},photoUploaded:function(e){this.ad.photoUrl=e},editAd:function(){var e=this;this.$validator.validateAll().then(function(t){t&&(e.loading=!0,f.post("/ads/"+e.ad.id,e.ad).then(function(t){e.closeModal()}).catch(function(t){return e.loading=!1}))})},onClickDelete:function(){var e=this;this.loading=!0,f.post("/ads/"+this.ad.id+"/delete",this.ad).then(function(t){e.loading=!1,e.closeModal(),e.$router.push("/community/")}).catch(function(t){return e.loading=!1})}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{on:{submit:function(t){t.preventDefault(),e.editAd()}}},[a("v-card-media",{staticStyle:{"background-color":"#aaa"},attrs:{src:e.adPhotoOrPlaceHolder(),height:"250px"}},[a("v-layout",{class:{"card-image-gradient":e.ad.photoUrl,"media ":!0},attrs:{column:""}},[a("v-card-title",[a("v-spacer"),e._v(" "),e.ad.own&&!e.ad.photoUrl?a("div",{staticClass:"center-horizontally-and-vertically"},[a("upload-photo",{attrs:{url:"/ads/"+e.ad.id+"/photo",onUpload:e.photoUploaded}},[a("v-btn",{staticClass:"upload-photo-button",attrs:{slot:"activator",dark:"",outline:"",round:""},slot:"activator"},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("photo_camera")]),e._v("\n              "+e._s(e.$t("Ad.addPhoto"))+"\n            ")],1)],1)],1):e._e(),e._v(" "),e.ad.own&&e.ad.photoUrl?a("upload-photo",{attrs:{url:"/ads/"+e.ad.id+"/photo",onUpload:e.photoUploaded}},[a("v-btn",{staticClass:"mr-3 upload-photo-button",attrs:{slot:"activator",dark:"",icon:""},slot:"activator"},[a("v-icon",[e._v("add_a_photo")])],1)],1):e._e()],1),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-chip",{staticClass:"my-0",staticStyle:{position:"absolute",bottom:"15px",left:"10px"},attrs:{label:"",small:"","text-color":"white",color:"green",absolute:""}},[a("v-icon",{attrs:{small:""}},[e._v("label")]),e._v(" "+e._s(e.ad.type)+"\n    ")],1)],1),e._v(" "),a("v-card-text",[a("div",[e._v(e._s(e.$t("AdCreate.type")))]),e._v(" "),a("v-radio-group",{attrs:{row:"","error-messages":e.errors.collect("type"),"data-vv-name":"type"},model:{value:e.ad.type,callback:function(t){e.$set(e.ad,"type",t)},expression:"ad.type"}},e._l(["WANT","GIVE"],function(t){return a("v-radio",{key:t,attrs:{label:e.$t("AdCreate.adType."+t),value:t}})})),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("AdCreate.title"),type:"text","error-messages":e.errors.collect("title"),"data-vv-name":"title",value:"{ad.title}"},model:{value:e.ad.title,callback:function(t){e.$set(e.ad,"title",t)},expression:"ad.title"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("AdCreate.description"),type:"text","error-messages":e.errors.collect("description"),value:"","data-vv-name":"description"},model:{value:e.ad.description,callback:function(t){e.$set(e.ad,"description",t)},expression:"ad.description"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{label:e.$t("AdCreate.points"),type:"text","error-messages":e.errors.collect("reward"),"data-vv-name":"reward"},model:{value:e.ad.points,callback:function(t){e.$set(e.ad,"points",t)},expression:"ad.points"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("AdCreate.location"),type:"text","error-messages":e.errors.collect("location"),"data-vv-name":"location"},model:{value:e.ad.location,callback:function(t){e.$set(e.ad,"location",t)},expression:"ad.location"}})],1),e._v(" "),a("v-card-actions",[a("small",{staticStyle:{"text-align":"right",color:"#555","padding-right":"20px"}},[e._v(e._s(e.$t("AdCreate.createHint")))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{right:"",color:"primary",type:"submit",disabled:e.loading}},[e._v(e._s(e.$t("AdEdit.updateButton")))]),e._v(" "),a("v-btn",{attrs:{right:"",color:"red",disabled:e.loading},on:{click:function(t){e.onClickDelete()}}},[e._v(e._s(e.$t("AdEdit.deleteButton")))])],1)],1)},staticRenderFns:[]},de={name:"Ad",components:{AppToolbar:A,Avatar:G,MessageThread:ae,UploadPhoto:oe,Modal:O,AdEdit:a("VU/8")(le,ce,!1,null,null,null).exports},props:["id","closeModal"],beforeRouteEnter:function(e,t,a){f.get("/ads/"+e.params.id).then(function(e){a(function(t){return t.ad=F()({photoUrl:""},e.data)})})},data:function(){return{ad:null,editAd:!1}},methods:{adPhotoOrPlaceHolder:function(){return this.ad?this.ad.photoUrl?this.ad.photoUrl:this.ad.own?"":"/static/temp/ad-placeholder.png":""},photoUploaded:function(e){this.ad.photoUrl=e},messageForAd:function(e){f.post("/message-threads/for-ad/"+this.id).then(function(e){return $router.push("/messages/"+e.data.id)})},editForAd:function(e){this.editAd=!0},closeCreateAdDialog:function(){this.createAd=!1,this.loadAds()},onClickAd:function(){}}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.ad?a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-card",[a("v-card-media",{staticStyle:{"background-color":"#aaa"},attrs:{src:e.adPhotoOrPlaceHolder(),height:"250px"}},[a("v-layout",{class:{"card-image-gradient":e.ad.photoUrl,"media ":!0},attrs:{column:""}},[a("v-card-title",[a("v-btn",{attrs:{dark:"",icon:""},on:{click:function(t){e.$router.back()}}},[a("v-icon",[e._v("close")])],1),e._v(" "),a("v-spacer"),e._v(" "),e.ad.own&&!e.ad.photoUrl?a("div",{staticClass:"center-horizontally-and-vertically"},[a("upload-photo",{attrs:{url:"/ads/"+e.ad.id+"/photo",onUpload:e.photoUploaded}},[a("v-btn",{staticClass:"upload-photo-button",attrs:{slot:"activator",dark:"",outline:"",round:""},slot:"activator"},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("photo_camera")]),e._v("\n                  "+e._s(e.$t("Ad.addPhoto"))+"\n                ")],1)],1)],1):e._e(),e._v(" "),e.ad.own&&e.ad.photoUrl?a("upload-photo",{attrs:{url:"/ads/"+e.ad.id+"/photo",onUpload:e.photoUploaded}},[a("v-btn",{staticClass:"mr-3 upload-photo-button",attrs:{slot:"activator",dark:"",icon:""},slot:"activator"},[a("v-icon",[e._v("add_a_photo")])],1)],1):e._e()],1),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-chip",{staticClass:"my-0",staticStyle:{position:"absolute",bottom:"15px",left:"10px"},attrs:{label:"",small:"","text-color":"white",color:"green",absolute:""}},[a("v-icon",{attrs:{small:""}},[e._v("label")]),e._v(" "+e._s(e.ad.type)+"\n        ")],1)],1),e._v(" "),a("v-card-title",{staticStyle:{position:"relative"},attrs:{"primary-title":""}},[a("v-layout",{attrs:{column:""}},[a("div",{staticClass:"headline"},[e._v(e._s(e.ad.title))]),e._v(" "),a("div",[e._v(e._s(e.ad.description))])]),e._v(" "),e.ad.own?a("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",color:"primary"},on:{click:function(t){e.editForAd(e.ad)}}},[a("v-icon",[e._v("edit")])],1):e._e(),e._v(" "),e.ad.own?e._e():a("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",color:"primary"},on:{click:function(t){e.messageForAd(e.ad)}}},[a("v-icon",[e._v("message")])],1)],1),e._v(" "),a("v-list",[e._e(),e._v(" "),e._e(),e._v(" "),a("v-list-tile",{on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary"}},[e._v("location_on")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(e.ad.location))])],1)],1),e._v(" "),a("v-divider",{attrs:{inset:""}}),e._v(" "),a("v-list-tile",{on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary"}},[e._v("account_balance_wallet")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(e.ad.points))])],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[e.ad.own?a("v-card",{attrs:{flat:"",to:"/profile"}},[a("v-layout",{attrs:{"align-center":"",row:""}},[a("v-flex",{attrs:{"ml-3":"",xs2:""}},[a("avatar",{attrs:{user:e.ad.createdBy}})],1),e._v(" "),a("v-flex",{attrs:{"my-2":""}},[a("div",{staticClass:"title"},[e._v(e._s(e.ad.createdBy.username))])]),e._v(" "),a("v-flex",{attrs:{"mr-3":"",xs1:""}},[a("v-icon",[e._v("keyboard_arrow_right")])],1)],1)],1):e._e(),e._v(" "),e.ad.own?e._e():a("v-card",{attrs:{flat:"",to:"/profile/"+e.ad.createdBy.id+"/"+e.ad.communityId+"/"+e.ad.id}},[a("v-layout",{attrs:{"align-center":"",row:""}},[a("v-flex",{attrs:{"ml-3":"",xs2:""}},[a("avatar",{attrs:{user:e.ad.createdBy}})],1),e._v(" "),a("v-flex",{attrs:{"my-2":""}},[a("div",{staticClass:"title"},[e._v(e._s(e.ad.createdBy.username))])]),e._v(" "),a("v-flex",{attrs:{"mr-3":"",xs1:""}},[a("v-icon",[e._v("keyboard_arrow_right")])],1)],1)],1),e._v(" "),e.ad.own?e._e():a("v-btn",{staticClass:"ml-0 mt-3 message-button",attrs:{large:"",block:"",color:"primary"},on:{click:function(t){e.messageForAd(e.ad)}}},[a("v-icon",{attrs:{small:"",left:""}},[e._v("message")]),e._v("\n          "+e._s(e.$t("Ad.sendMessage"))+"\n        ")],1)],1)],1)],1),e._v(" "),e.editAd?a("modal",{attrs:{title:e.$t("Community.newAdvertisementModalTitle")},on:{close:e.closeCreateAdDialog},scopedSlots:e._u([{key:"default",fn:function(t){return a("ad-edit",{attrs:{closeModal:t.close,ad:e.ad}})}}])}):e._e()],1):a("div",[e._v("\n  "+e._s(e.$t("General.loadingData"))+"\n")])},staticRenderFns:[]},me=a("VU/8")(de,ue,!1,null,null,null).exports,ve={mixins:[C],components:{AppToolbar:A,Avatar:G,Modal:O,AppBottomNav:j},data:function(){return{transactions:[],communityId:null,balance:null,loading:!1}},methods:{changeCommunity:function(e){var t=this;this.loading=!0;var a=this.user.communityList.filter(function(t){return t.id===e})[0].adminUserId;b.setUserAdmin(a===this.user.id),f.get("transactions?communityId="+e).then(function(a){t.balance=t.user.balanceList.filter(function(t){return t.communityId===e})[0].balance,t.transactions=a.data,t.loading=!1})},onUserChanged:function(e){this.user=e,this.communityId=this.user.communityList[0].id,this.changeCommunity(this.user.communityList[0].id)},otherPartyUser:function(e){return e.debit?e.beneficiary:e.remitter},formattedAmount:function(e){return(e.debit?"-":"+")+e.amount}},created:function(){b.loadUser()}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-toolbar",{attrs:{title:e.$t("Wallet.title")}},[a("v-select",{attrs:{items:e.user.communityList,"item-text":"name","item-value":"id",label:e.$t("CreateAccount.community"),"single-line":"","data-vv-name":"community","hide-details":""},on:{change:e.changeCommunity},model:{value:e.communityId,callback:function(t){e.communityId=t},expression:"communityId"}})],1),e._v(" "),a("v-card",{attrs:{flat:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-layout",{attrs:{"align-center":"",row:""}},[a("v-flex",[a("span",{staticClass:"headline"},[e._v(e._s(e.$t("Wallet.balance")))])]),e._v(" "),a("v-flex",{staticClass:"text-xs-right"},[a("span",{staticClass:"title"},[a("v-icon",{staticStyle:{"vertical-align":"bottom"}},[e._v("account_balance_wallet")]),e._v(" "+e._s(e.balance?e.balance:""))],1)])],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("div",[e.transactions.length?a("v-list",{staticClass:"pt-0",attrs:{"three-line":""}},[e._l(e.transactions,function(t,s){return[a("v-list-tile",{key:t.title,staticClass:"transaction"},[a("v-list-tile-avatar",[a("avatar",{attrs:{user:e.otherPartyUser(t)}})],1),e._v(" "),a("v-list-tile-content",[a("div",{staticStyle:{width:"100%"}},[a("v-layout",{attrs:{row:"","justify-space-between":""}},[a("div",{staticClass:"body-3"},[e._v("\n                  "+e._s(t.debit?t.beneficiary.username:t.remitter.username)+"\n                ")]),e._v(" "),a("div",{staticClass:"body-3 text-xs-right",class:{debit:t.debit,credit:!t.debit,"text-opaque":!t.completed}},[e._v("\n                  "+e._s(e.formattedAmount(t))+"\n                ")])]),e._v(" "),a("v-layout",{attrs:{row:"","justify-space-between":""}},[a("div",[a("v-list-tile-sub-title",{domProps:{innerHTML:e._s(t.description)}}),e._v(" "),a("div",{staticClass:"caption grey--text"},[e._v(e._s(e._f("moment")(t.createdAt,"from")))])],1),e._v(" "),t.completed?e._e():a("v-chip",{attrs:{disabled:"",small:"",outline:"",color:"orange"}},[e._v("\n                  "+e._s(e.$t("Wallet.pendingTransaction"))+"\n                ")])],1)],1)])],1),e._v(" "),s+1<e.transactions.length?a("v-divider",{attrs:{inset:""}}):e._e()]})],2):e.user.balance?e._e():a("v-alert",{attrs:{type:"info",value:"true"}},[e._v(e._s(e.$t("Wallet.empty")))])],1),e._v(" "),a("app-bottom-nav")],1)},staticRenderFns:[]};var he=a("VU/8")(ve,pe,!1,function(e){a("8O08")},"data-v-fe0a77c4",null).exports,fe={name:"AdCreate",props:["closeModal","user"],data:function(){return{ad:{communityId:null,createdBy:{id:this.user.id,fullName:this.user.fullName,username:this.user.username,description:this.user.description,location:this.user.location,avatarUrl:this.user.avatarUrl},title:null,description:null,points:null,location:null,own:!0,payable:!1,type:null,createdAt:Date()},loading:!1}},methods:{changeCommunity:function(e){this.ad.communityId=e},createAd:function(){var e=this;this.$validator.validateAll().then(function(t){t&&(e.loading=!0,0==e.user.balanceList.filter(function(t){return t.communityId==e.communityId})[0]?e.ad.payable=!1:!0===e.ad.own&&"WANT"===e.ad.type?e.ad.payable=!0:!1===e.ad.own&&"GIVE"===e.ad.type&&(e.ad.payable=!0),f.post("/ads",e.ad).then(function(t){e.closeModal(),e.$router.push("/community/ad/"+t.data.id)}).catch(function(t){return e.loading=!1}))})}}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{on:{submit:function(t){t.preventDefault(),e.createAd()}}},[a("v-card-text",[a("div",[e._v(e._s(e.$t("AdCreate.type")))]),e._v(" "),a("v-radio-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{row:"","error-messages":e.errors.collect("type"),"data-vv-name":"type"},model:{value:e.ad.type,callback:function(t){e.$set(e.ad,"type",t)},expression:"ad.type"}},e._l(["WANT","GIVE"],function(t){return a("v-radio",{key:t,attrs:{label:e.$t("AdCreate.adType."+t),value:t}})})),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("AdCreate.title"),type:"text","error-messages":e.errors.collect("title"),"data-vv-name":"title"},model:{value:e.ad.title,callback:function(t){e.$set(e.ad,"title",t)},expression:"ad.title"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("AdCreate.description"),type:"text","error-messages":e.errors.collect("description"),"data-vv-name":"description"},model:{value:e.ad.description,callback:function(t){e.$set(e.ad,"description",t)},expression:"ad.description"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{label:e.$t("AdCreate.points"),type:"text","error-messages":e.errors.collect("reward"),"data-vv-name":"reward"},model:{value:e.ad.points,callback:function(t){e.$set(e.ad,"points",t)},expression:"ad.points"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("AdCreate.location"),type:"text","error-messages":e.errors.collect("location"),"data-vv-name":"location"},model:{value:e.ad.location,callback:function(t){e.$set(e.ad,"location",t)},expression:"ad.location"}}),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.user.communityList,"item-text":"name","item-value":"id",label:e.$t("CreateAccount.community"),"single-line":"","data-vv-name":"community","hide-details":"","error-messages":e.errors.collect("community")},on:{change:e.changeCommunity},model:{value:e.ad.communityId,callback:function(t){e.$set(e.ad,"communityId",t)},expression:"ad.communityId"}})],1),e._v(" "),a("v-card-actions",[a("small",{staticStyle:{"text-align":"right",color:"#555","padding-right":"20px"}},[e._v(e._s(e.$t("AdCreate.createHint")))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{right:"",color:"primary",type:"submit",disabled:e.loading}},[e._v(e._s(e.$t("AdCreate.createButton")))])],1)],1)},staticRenderFns:[]},ge=a("VU/8")(fe,_e,!1,null,null,null).exports,ye={name:"AdList",components:{AdCreate:ge,Avatar:G},props:["ads","communityId"]},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.ads.length?a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.ads,function(t,s){return a("v-flex",{key:s,staticClass:"ad",attrs:{xs12:"",sm6:"","offset-sm3":"","hide-actions":""}},[a("v-card",{attrs:{to:"/community/ad/"+t.id}},[a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs7:""}},[a("div",[a("h3",{staticClass:"subtitle mb-0"},[e._v(e._s(t.title))]),e._v(" "),a("v-layout",{attrs:{column:"true"}},[a("v-flex",{staticClass:"pt-1 pb-0"},[a("v-icon",{attrs:{small:""}},[e._v("access_time")]),e._v(" "),a("span",{staticClass:"caption"},[e._v(e._s(e._f("moment")(t.createdAt,"LLL")))])],1),e._v(" "),a("v-flex",{staticClass:"pt-1 pb-0"},[a("v-icon",{attrs:{small:""}},[e._v("location_on")]),e._v(" "),a("span",{staticClass:"caption"},[e._v(e._s(t.location))])],1),e._v(" "),a("v-flex",{staticClass:"pt-1 body-2"},[a("v-icon",{attrs:{small:""}},[e._v("account_balance_wallet")]),e._v(" "),a("span",{staticClass:"caption"},[e._v(e._s(t.points))])],1)],1)],1)]),e._v(" "),a("v-flex",{staticClass:"py-1",attrs:{xs5:""}},[a("v-card-media",{staticStyle:{position:"relative"},attrs:{src:t.photoUrl||"/static/temp/ad-placeholder.png",height:"125px",cover:""}},[a("v-chip",{staticClass:"ma-0",staticStyle:{position:"absolute",right:"10px",top:"10px"},attrs:{label:"",small:"",color:"green","text-color":"white"}},[a("v-icon",{attrs:{small:""}},[e._v("label")]),e._v(" "+e._s(e.$t("AdList.adType."+t.type))+"\n                  ")],1)],1)],1)],1)],1)],1)],1)}))],1):a("v-alert",{attrs:{type:"info",value:"true"}},[e._v(e._s(e.$t("AdList.noAds")))])],1)},staticRenderFns:[]},we={mixins:[C],components:{AdList:a("VU/8")(ye,be,!1,null,null,null).exports,AppToolbar:A,AppBottomNav:j,AdCreate:ge,Modal:O},data:function(){return{loading:!0,communityId:null,searchVisible:!1,searchPattern:"",createAd:!1,timer:null,ads:[],user:null}},watch:{searchPattern:function(){this.searchUpdated()}},methods:{onUserChanged:function(e){this.user=e,this.communityId=this.user.communityList[0].id,this.changeCommunity(this.user.communityList[0].id)},loadAds:function(e){var t=this;this.loading=!0,f.get("/ads?communityId="+e).then(function(e){t.ads=e.data,t.loading=!1})},filter:function(e){var t=this;f.get("/ads?communityId="+this.communityId,{params:{filter:e}}).then(function(e){return t.ads=e.data})},toggleSearchDialog:function(){this.searchVisible=!this.searchVisible,this.searchVisible||this.filter("")},searchUpdated:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.filter(e.searchPattern)},400)},openCreateAdDialog:function(){this.createAd=!0},closeCreateAdDialog:function(){this.createAd=!1,this.loadAds(this.communityId)},changeCommunity:function(e){var t=this.user.communityList.filter(function(t){return t.id===e})[0].adminUserId;b.setUserAdmin(t===this.user.id),this.loadAds(e)}},created:function(){String(this.$router.currentRoute.path).startsWith("/create-account/")||String(this.$router.currentRoute.path).startsWith("/passwordreset/")||b.loadUser().then(function(){return messagePoller.start()})}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-toolbar",{attrs:{title:e.$t("Community.title")}},[a("v-select",{attrs:{items:e.user.communityList,"item-text":"name","item-value":"id",label:e.$t("CreateAccount.community"),"single-line":"","data-vv-name":"community","hide-details":""},on:{change:e.changeCommunity},model:{value:e.communityId,callback:function(t){e.communityId=t},expression:"communityId"}}),e._v(" "),a("v-btn",{attrs:{slot:"default",icon:""},on:{click:function(t){e.toggleSearchDialog()}},slot:"default"},[a("v-icon",[e._v("search")])],1),e._v(" "),a("v-btn",{staticClass:"create-ad",attrs:{slot:"default",icon:"",disabled:e.searchVisible},on:{click:function(t){t.preventDefault(),e.openCreateAdDialog()}},slot:"default"},[a("v-icon",[e._v("add")])],1),e._v(" "),e.searchVisible?a("v-text-field",{staticClass:"px-2",attrs:{slot:"extension",clearable:"",placeholder:e.$t("Community.searchHint"),type:"text"},slot:"extension",model:{value:e.searchPattern,callback:function(t){e.searchPattern=t},expression:"searchPattern"}}):e._e()],1),e._v(" "),e.loading?e._e():a("ad-list",{attrs:{ads:e.ads}}),e._v(" "),a("app-bottom-nav",{attrs:{communityId:e.communityId}}),e._v(" "),e.createAd?a("modal",{attrs:{title:e.$t("Community.newAdvertisementModalTitle")},on:{close:e.closeCreateAdDialog},scopedSlots:e._u([{key:"default",fn:function(t){return a("ad-create",{attrs:{closeModal:t.close,user:e.user}})}}])}):e._e()],1)},staticRenderFns:[]},ke=a("VU/8")(we,xe,!1,null,null,null).exports,$e={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-avatar",[t("img",{staticClass:"left-half",attrs:{src:this.users[0].avatarUrl||this.defaultAvatar}}),this._v(" "),t("img",{staticClass:"right-half",attrs:{src:this.users[1].avatarUrl||this.defaultAvatar}})])},staticRenderFns:[]};var Ae={name:"CreateGroup",mixins:[C],props:["closeModal"],components:{SelectGroupMembers:J},data:function(){return{title:"",users:[],filter:"",search:null,selected:[],communityId:null}},watch:{search:function(e){e&&this.loadUsers(e)}},methods:{loadUsers:function(e){var t=this;this.$validator.validateAll().then(function(a){f.get("/users?communityId="+t.communityId+"&q="+encodeURI(e)).then(function(e){return t.users=e.data})})},memberSelected:function(e){this.selected=e},createGroup:function(){var e=this,t=this.selected.map(function(e){return e.id});f.post("/message-threads/group",{memberIds:t,title:this.title}).then(function(t){e.closeModal(),e.$router.push("/messages/"+t.data.id)})},changeCommunity:function(e){this.communityId=e}}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",[a("v-card-text",[a("div",{staticClass:"mb-2"},[e.user?a("v-chip",[a("v-avatar",[a("img",{attrs:{src:e.user.avatarUrl}})]),e._v("\n        "+e._s(e.user.username)+"\n      ")],1):e._e(),e._v(" "),a("small",[e._v("Group creator")])],1),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.user.communityList,"item-text":"name","item-value":"id",label:e.$t("CreateAccount.community"),"single-line":"","data-vv-name":"community","hide-details":""},on:{change:e.changeCommunity},model:{value:e.communityId,callback:function(t){e.communityId=t},expression:"communityId"}}),e._v(" "),a("select-group-members",{attrs:{"existing-members":[],"member-selected":e.memberSelected,communityId:e.communityId}}),e._v(" "),a("v-text-field",{attrs:{label:e.$t("CreateGroup.title"),type:"text"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),a("v-card-actions",[a("small",{staticStyle:{"text-align":"right",color:"#555","padding-right":"20px"}},[e._v(e._s(e.$t("CreateGroup.createHint")))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{disabled:!e.selected.length,color:"primary",right:""},on:{click:function(t){e.createGroup()}}},[e._v("\n      "+e._s(e.$t("CreateGroup.create"))+"\n    ")])],1)],1)},staticRenderFns:[]},Ue={components:{AppToolbar:A,AppBottomNav:j,Avatar:G,GroupAvatar:a("VU/8")({props:["users"],data:function(){return{defaultAvatar:"/static/avatar-placeholder.png"}},methods:{showProfile:function(e){this.$router.push("/profile/"+e.id)}}},$e,!1,function(e){a("iF5I")},"data-v-def97268",null).exports,Modal:O,MessageThread:ae,CreateGroup:a("VU/8")(Ae,Ce,!1,null,null,null).exports},data:function(){return{messageThreads:[],createGroupChatOptions:!1}},beforeRouteEnter:function(e,t,a){f.get("/message-threads").then(function(e){a(function(t){return t.messageThreads=e.data})})},created:function(){y.checkForUnreadThreads()},methods:{userById:function(e,t){return t===e.creator.id?e.creator:e.parties.find(function(e){return e.id===t})}}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-toolbar",{attrs:{title:e.$t("Messages.title")}},[a("v-btn",{attrs:{slot:"default",icon:""},on:{click:function(t){e.createGroupChatOptions=!0}},slot:"default"},[a("v-icon",[e._v("add")])],1)],1),e._v(" "),e.messageThreads.length?a("v-list",{attrs:{"three-line":""}},[e._l(e.messageThreads,function(t,s){return[a("v-list-tile",{staticClass:"thread",attrs:{avatar:"",to:"/messages/"+t.id}},[a("v-list-tile-avatar",[t.group?e._e():a("avatar",{attrs:{user:t.counterParty}}),e._v(" "),t.group?a("group-avatar",{attrs:{users:t.parties.concat([t.creator])}}):e._e()],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[a("span",{class:{unread:t.unread}},[e._v(e._s(t.title))])]),e._v(" "),a("v-list-tile-sub-title",{staticStyle:{"line-height":"1.3"}},[t.lastMessage?a("span",[a("span",{staticClass:"text--primary"},[e._v(e._s(e.userById(t,t.lastMessage.createdBy).username))]),e._v(" – "+e._s(t.lastMessage.text)+"\n            ")]):a("span",{staticClass:"caption grey--text"},[e._v(e._s(e.$t("Messages.noMessagesInThread")))])]),e._v(" "),t.lastMessage?a("div",{staticClass:"caption grey--text"},[e._v(e._s(e._f("moment")(t.lastMessage.createdAt,"from")))]):e._e()],1)],1),e._v(" "),s+1<e.messageThreads.length?a("v-divider",{attrs:{inset:""}}):e._e()]})],2):a("v-alert",{attrs:{type:"info",value:"true"}},[e._v(e._s(e.$t("Messages.noMessageThreads")))]),e._v(" "),a("app-bottom-nav"),e._v(" "),e.createGroupChatOptions?a("modal",{attrs:{title:e.$t("Messages.createGroupModalTitle")},on:{close:function(t){e.createGroupChatOptions=!1}},scopedSlots:e._u([{key:"default",fn:function(e){return a("create-group",{attrs:{closeModal:e.close}})}}])}):e._e()],1)},staticRenderFns:[]};var je=a("VU/8")(Ue,Pe,!1,function(e){a("EwZy")},"data-v-2c626faa",null).exports,Ie={mixins:[C],components:{AppToolbar:A,AppBottomNav:j,Avatar:G,UploadPhoto:oe},methods:{reloadUser:function(){return b.loadUser()},logout:function(){return b.logout()}}},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.user?a("div",[a("v-card",[a("v-card-media",{staticStyle:{"background-color":"#aaa"},attrs:{src:e.user.avatarUrl,height:"250px"}},[e.user.avatarUrl?e._e():a("div",{staticClass:"center-horizontally-and-vertically"},[a("upload-photo",{attrs:{url:"/users/"+e.user.id+"/avatar",onUpload:e.reloadUser}},[a("v-btn",{attrs:{slot:"activator",dark:"",outline:"",round:""},slot:"activator"},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("photo_camera")]),e._v("\n            "+e._s(e.$t("Profile.addPhoto"))+"\n          ")],1)],1)],1),e._v(" "),a("v-layout",{class:{"media card-image-gradient":e.user.avatarUrl},attrs:{column:""}},[a("v-card-title",[a("v-spacer"),e._v(" "),e.user.avatarUrl?a("upload-photo",{attrs:{url:"/users/"+e.user.id+"/avatar",onUpload:e.reloadUser}},[a("v-btn",{staticClass:"mr-2",attrs:{slot:"activator",dark:"",icon:""},slot:"activator"},[a("v-icon",[e._v("photo_camera")])],1)],1):e._e(),e._v(" "),a("v-btn",{staticClass:"mr-0",attrs:{dark:"",icon:"",to:"/profile/edit"}},[a("v-icon",[e._v("edit")])],1)],1),e._v(" "),a("v-spacer")],1)],1),e._v(" "),a("v-card-title",{staticClass:"pb-0",staticStyle:{position:"relative"},attrs:{"primary-title":""}},[a("v-layout",{attrs:{column:""}},[a("div",{staticClass:"headline"},[e._v("\n          "+e._s(e.user.username)+"\n        ")]),e._v(" "),a("div",[e._v(e._s(e.user.description))])])],1),e._v(" "),a("v-list",[a("v-list-tile",{on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary"}},[e._v("location_on")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(e.user.location))])],1)],1),e._v(" "),a("v-divider",{attrs:{inset:""}}),e._v(" "),a("v-list-tile",{on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary"}},[e._v("account_balance_wallet")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(e.user.balance))])],1)],1)],1),e._v(" "),a("v-divider")],1),e._v(" "),a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{block:"",color:"primary"},on:{click:function(e){e.preventDefault()}}},[a("v-icon",{staticClass:"mr-2"},[e._v("collections_bookmark")]),e._v("\n      Manage my ads\n    ")],1),e._v(" "),a("v-btn",{staticClass:"logout mt-4",attrs:{flat:"",block:"",color:"grey"},on:{click:function(t){t.preventDefault(),e.logout()}}},[a("v-icon",{staticClass:"mr-2"},[e._v("power_settings_new")]),e._v("\n      "+e._s(e.$t("Profile.logout"))+"\n    ")],1)],1),e._v(" "),a("app-bottom-nav")],1):e._e()},staticRenderFns:[]},Te=a("VU/8")(Ie,Ee,!1,null,null,null).exports,Me={props:["userId","communityId","adId"],mixins:[C],components:{AppToolbar:A,Avatar:G,MakePayment:X,Modal:O},data:function(){return{otherUser:{},makePayment:!1}},created:function(){this.loadOtherUser()},methods:{goback:function(){this.$router.back()},loadOtherUser:function(){var e=this;f.get("/users/"+this.userId).then(function(t){return e.otherUser=t.data})},paymentDone:function(){this.makePayment=!1,this.loadOtherUser()}}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.otherUser?a("div",[a("v-card",[a("v-card-media",{attrs:{src:e.otherUser.avatarUrl||"/static/avatar-placeholder.png",height:"250px"}},[a("v-layout",{staticClass:"media card-image-gradient",attrs:{column:""}},[a("v-card-title",[a("v-btn",{attrs:{slot:"left",dark:"",icon:""},on:{click:function(t){e.goback()}},slot:"left"},[a("v-icon",[e._v("arrow_back")])],1),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-spacer")],1)],1),e._v(" "),a("v-card-title",{staticClass:"pb-0",staticStyle:{position:"relative"},attrs:{"primary-title":""}},[a("v-layout",{attrs:{column:""}},[a("div",{staticClass:"headline"},[e._v(e._s(e.otherUser.username))]),e._v(" "),a("div",[e._v(e._s(e.otherUser.description))])])],1),e._v(" "),a("v-list",[a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary"}},[e._v("location_on")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(e.otherUser.location))])],1)],1),e._v(" "),e.otherUser.balance?a("v-divider",{attrs:{inset:""}}):e._e(),e._v(" "),e.otherUser.balance?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:"primary"}},[e._v("account_balance_wallet")])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(e.otherUser.balance))])],1)],1):e._e()],1)],1),e._v(" "),e.user?a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-btn",{staticClass:"make-payment",attrs:{block:""},on:{click:function(t){t.preventDefault(),e.makePayment=!0}}},[e._v("\n      "+e._s(e.user.admin?e.$t("OtherUserProfile.makeTopup"):e.$t("OtherUserProfile.makePayment"))+"\n    ")]),e._v(" "),e.makePayment?a("modal",{attrs:{title:e.user.admin?e.$t("OtherUserProfile.makeTopupModalTitle"):e.$t("OtherUserProfile.makePaymentModalTitle")},on:{close:function(t){e.paymentDone()}},scopedSlots:e._u([{key:"default",fn:function(t){return a("make-payment",{attrs:{amount:e.user.admin?"2000":"",communityId:e.communityId,adId:e.adId,beneficiary:e.otherUser,description:e.user.admin?e.$t("OtherUserProfile.makeTopupDefaultDescription"):"",user:e.user,closeModal:t.close}})}}])}):e._e()],1):e._e()],1):e._e()},staticRenderFns:[]},Se=a("VU/8")(Me,Ne,!1,null,null,null).exports,Re={name:"SearchUser",mixins:[C],components:{Avatar:G,AppToolbar:A,AppBottomNav:j},data:function(){return{keyword:null,users:[],debounceTimer:null,communityId:null}},methods:{loadUsers:function(){var e=this;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){return f.get("/users?communityId="+e.communityId+"&q="+encodeURI(e.keyword)).then(function(t){return e.users=t.data})},300)},showProfile:function(e){b.setUserAdmin(!0);this.$router.push("/profile/"+e.id+"/"+this.communityId+"/null")}},created:function(){var e=this;this.communityId=this.user.communityList.filter(function(t){return t.adminUserId===e.user.id})[0].id}},Ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-toolbar",{attrs:{title:"Admin"}}),e._v(" "),a("v-subheader",[e._v("Top-up users")]),e._v(" "),a("div",{staticClass:"px-3"},[a("v-text-field",{attrs:{label:e.$t("SearchUser.search"),type:"text"},on:{change:function(t){e.loadUsers()},keyup:function(t){e.loadUsers()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),e.users.length?a("v-list",{attrs:{"three-line":""}},[e._l(e.users,function(t,s){return[a("v-list-tile",{staticClass:"user",on:{click:function(a){e.showProfile(t)}}},[a("v-layout",{attrs:{"align-center":"",row:""}},[a("v-flex",{attrs:{xs3:""}},[a("avatar",{attrs:{user:t}})],1),e._v(" "),a("v-flex",[a("div",{staticClass:"title"},[e._v(e._s(t.username))])]),e._v(" "),a("v-flex",{attrs:{"mr-3":"",xs1:""}},[a("v-icon",[e._v("keyboard_arrow_right")])],1)],1)],1),e._v(" "),s+1<e.users.length?a("v-divider"):e._e()]})],2):e._e(),e._v(" "),a("app-bottom-nav")],1)},staticRenderFns:[]},qe=a("VU/8")(Re,Ve,!1,null,null,null).exports,Le={name:"CreateAccount",data:function(){return{loading:!1,communities:[],user:{username:null,emailAddress:null,password:null,firstName:null,lastName:null,description:null,location:null,communityList:[]},password2:null,hidePassword:!0,error:null}},methods:{createAccount:function(){var e=this;this.error="",this.$validator.validateAll().then(function(t){t&&(e.loading=!0,b.createAndLogin(e.user).then(function(){return u("Welcome to Community OS")}).catch(function(){return e.loading=!1}))})},setUser:function(e,t){this.username=e,this.password=t}},created:function(){var e=this;f.get("/communities").then(function(t){e.communities=t.data,1===e.communities.length&&(e.user.communityList[0]=e.communities[0].id)})}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticStyle:{height:"auto"}},[a("v-toolbar",{attrs:{app:"",dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",to:"/login",disabled:e.loading}},[a("v-icon",[e._v("arrow_back")])],1),e._v(" "),a("v-toolbar-title",[e._v(e._s(e.$t("CreateAccount.title")))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{icon:"",disabled:e.loading},on:{click:function(t){t.preventDefault(),e.createAccount()}}},[a("v-icon",[e._v("check")])],1)],1),e._v(" "),a("v-card-text",[a("v-form",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],attrs:{"prepend-icon":"person",label:e.$t("CreateAccount.username"),type:"text","error-messages":e.errors.collect("username"),"data-vv-name":"username",hint:e.$t("CreateAccount.usernameHint"),min:"4",counter:"50"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"prepend-icon":"email",label:e.$t("CreateAccount.email"),type:"text","error-messages":e.errors.collect("email"),"data-vv-name":"email",hint:e.$t("CreateAccount.emailHint"),counter:"50"},model:{value:e.user.emailAddress,callback:function(t){e.$set(e.user,"emailAddress",t)},expression:"user.emailAddress"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],attrs:{"prepend-icon":"lock",label:e.$t("CreateAccount.password"),"error-messages":e.errors.collect("password"),hint:e.$t("CreateAccount.passwordHint"),"append-icon":e.hidePassword?"visibility":"visibility_off","append-icon-cb":function(){return e.hidePassword=!e.hidePassword},type:e.hidePassword?"password":"text",counter:"50",name:"password","data-vv-name":"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],attrs:{"prepend-icon":"lock",label:e.$t("CreateAccount.password2"),"error-messages":e.errors.collect("password2"),hint:e.$t("CreateAccount.password2Hint"),"append-icon":e.hidePassword?"visibility":"visibility_off","append-icon-cb":function(){return e.hidePassword=!e.hidePassword},type:e.hidePassword?"password":"text",counter:"50","data-vv-name":"password2"},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("CreateAccount.lastName"),type:"text","error-messages":e.errors.collect("lastName"),"data-vv-name":"lastName"},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("CreateAccount.firstName"),type:"text","error-messages":e.errors.collect("firstName"),"data-vv-name":"firstName"},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}}),e._v(" "),a("v-text-field",{attrs:{label:e.$t("CreateAccount.description"),type:"text"},model:{value:e.user.description,callback:function(t){e.$set(e.user,"description",t)},expression:"user.description"}}),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.communities,"item-text":"name","item-value":"id",label:e.$t("CreateAccount.community"),"single-line":"","error-messages":e.errors.collect("community"),multiple:"","data-vv-name":"community"},model:{value:e.user.communityList,callback:function(t){e.$set(e.user,"communityList",t)},expression:"user.communityList"}}),e._v(" "),a("v-text-field",{attrs:{label:e.$t("CreateAccount.location"),type:"text"},model:{value:e.user.location,callback:function(t){e.$set(e.user,"location",t)},expression:"user.location"}})],1)],1),e._v(" "),a("v-card-actions",{staticClass:"pb-5 pr-3"},[a("small",{staticStyle:{"text-align":"right",color:"#555"}},[e._v(e._s(e.$t("CreateAccount.createHint")))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",disabled:e.loading},on:{click:function(t){t.preventDefault(),e.createAccount()}}},[e._v("\n          "+e._s(e.$t("CreateAccount.createButton"))+"\n      ")])],1)],1)},staticRenderFns:[]},De=a("VU/8")(Le,Fe,!1,null,null,null).exports,Ge={name:"EditProfile",mixins:[C],components:{AppToolbar:A},data:function(){return{localUser:{},loading:!1,dialog:!1,tempEmail:""}},methods:{submitChanges:function(){var e=this;this.$validator.validateAll().then(function(t){t&&(e.loading=!0,f.post("/users/"+e.localUser.id,e.localUser).then(function(e){return b.setUser(e.data)}).then(function(){e.loading=!1,e.tempEmail!==e.localUser.emailAddress?(e.loading=!0,f.post("/users/"+e.localUser.id+"/emailaddress",{newEmailAddress:e.localUser.emailAddress,userId:e.localUser.id,username:e.localUser.username}).then(function(e){})):e.$router.back()}))})},onDeleteAccount:function(){var e=this;this.loading=!0,f.post("/users/"+this.localUser.id+"/delete").then(function(t){e.loading=!1,e.dialog=!1,b.logout()})}},created:function(){this.localUser={id:this.user.id,username:this.user.username,emailAddress:this.user.emailAddress,firstName:this.user.firstName,lastName:this.user.lastName,description:this.user.description,location:this.user.location},this.tempEmail=this.user.emailAddress}},Be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-toolbar",{attrs:{title:e.$t("EditProfile.title")}},[a("v-btn",{attrs:{slot:"left",icon:""},on:{click:function(t){e.$router.back()}},slot:"left"},[a("v-icon",[e._v("arrow_back")])],1),e._v(" "),a("div",{staticClass:"mr-0",attrs:{slot:"default"},slot:"default"},[a("v-btn",{staticClass:"submit-form",attrs:{flat:"",color:"primary"},on:{click:function(t){t.preventDefault(),e.submitChanges()}}},[a("v-icon",{staticClass:"pr-2"},[e._v("check")])],1)],1)],1),e._v(" "),a("form",{on:{submit:function(t){return t.preventDefault(),e.submitChanges(t)}}},[a("v-card-text",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("EditProfile.username"),type:"text","error-messages":e.errors.collect("username"),"data-vv-name":"username"},model:{value:e.localUser.username,callback:function(t){e.$set(e.localUser,"username",t)},expression:"localUser.username"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("EditProfile.emailAddress"),type:"text","error-messages":e.errors.collect("emailAddress"),"data-vv-name":"emailAddress"},model:{value:e.localUser.emailAddress,callback:function(t){e.$set(e.localUser,"emailAddress",t)},expression:"localUser.emailAddress"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("EditProfile.lastName"),type:"text","error-messages":e.errors.collect("lastName"),"data-vv-name":"lastName"},model:{value:e.localUser.lastName,callback:function(t){e.$set(e.localUser,"lastName",t)},expression:"localUser.lastName"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:e.$t("EditProfile.firstName"),type:"text","error-messages":e.errors.collect("firstName"),"data-vv-name":"firstName"},model:{value:e.localUser.firstName,callback:function(t){e.$set(e.localUser,"firstName",t)},expression:"localUser.firstName"}}),e._v(" "),a("v-text-field",{attrs:{label:e.$t("EditProfile.description"),"data-vv-name":"description",type:"text"},model:{value:e.localUser.description,callback:function(t){e.$set(e.localUser,"description",t)},expression:"localUser.description"}}),e._v(" "),a("v-text-field",{attrs:{label:e.$t("EditProfile.location"),type:"text"},model:{value:e.localUser.location,callback:function(t){e.$set(e.localUser,"location",t)},expression:"localUser.location"}})],1)],1),e._v(" "),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-btn",{attrs:{color:"red",type:"submit",disabled:e.loading},on:{click:function(t){e.dialog=!0}}},[e._v(e._s(e.$t("AdEdit.deleteButton")))])],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-text",[e._v("\n        "+e._s(e.$t("EditProfile.deleteDialog"))+"\n      ")]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue",flat:"flat"},on:{click:function(t){e.dialog=!1}}},[e._v("\n          "+e._s(e.$t("EditProfile.cancel"))+"\n        ")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:"flat"},on:{click:function(t){e.onDeleteAccount()}}},[e._v("\n          OK\n        ")])],1)],1)],1)],1)},staticRenderFns:[]},He=a("VU/8")(Ge,Be,!1,null,null,null).exports,Oe={name:"EmailVerification",methods:{onPressOK:function(){window.$router.push("/login")}}},ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card-text",[a("p",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.$t("EmailVerification.hintStart"))+"\n                ")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-btn",{attrs:{color:"primary",type:"submit"},on:{click:function(t){e.onPressOK()}}},[e._v(e._s(e.$t("EmailVerification.ok")))])],1)],1)],1)],1)},staticRenderFns:[]},We=a("VU/8")(Oe,ze,!1,null,null,null).exports,Xe={name:"EmailVerificationInput",props:["accessId"],data:function(){return{loading:!0,error:!0}},methods:{startApp:function(){var e=navigator.userAgent||navigator.vendor||window.opera;/android/i.test(e)?window.open("intent://app.commons.love/#Intent;scheme=launch;package=app.commons.love;S.content=WebContent;end"):/iPad|iPhone|iPod/.test(e)&&!window.MSStream?window.open("commonsCustonUrl://"):this.error?window.$router.push("/login"):(window.$router.push("/profile"),messagePoller.start())}},created:function(){var e=this;f.post("/create-account/"+this.accessId).then(function(t){b.setUser(t.data),e.loading=!1,e.error=!1}).catch(function(t){e.loading=!1})}},Ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card-text",[a("p",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.$t("EmailVerification.hintSuccess"))+"\n                ")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-btn",{attrs:{color:"primary",type:"submit",disabled:e.loading},on:{click:function(t){e.startApp()}}},[e._v(e._s(e.$t("EmailVerification.startApp")))])],1)],1)],1)],1)},staticRenderFns:[]},Ke=a("VU/8")(Xe,Ye,!1,null,null,null).exports,Je={name:"EmailVerificationProfileInput",props:["id","accessId"],data:function(){return{loading:!0,error:!0}},methods:{startApp:function(){var e=this,t=navigator.userAgent||navigator.vendor||window.opera;/android/i.test(t)?window.open("intent://app.commons.love/#Intent;scheme=launch;package=app.commons.love;S.content=WebContent;end"):/iPad|iPhone|iPod/.test(t)&&!window.MSStream?window.open("commonsCustonUrl://"):this.error?window.$router.push("/login"):(this.loading=!0,b.loadUser().then(function(){e.loading=!1,e.error=!1,window.$router.push("/profile")}))}},created:function(){var e=this;f.post("/users/"+this.id+"/emailaddress/"+this.accessId,{id:this.id,accessId:this.accessId}).then(function(t){e.loading=!1,e.error=!1}).catch(function(t){e.loading=!1})}},Qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card-text",[a("p",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.$t("EmailVerification.hintSuccess"))+"\n                ")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-btn",{attrs:{color:"primary",type:"submit",disabled:e.loading},on:{click:function(t){e.startApp()}}},[e._v(e._s(e.$t("EmailVerification.startApp")))])],1)],1)],1)],1)},staticRenderFns:[]},Ze=a("VU/8")(Je,Qe,!1,null,null,null).exports,et={name:"PasswordResetEmail",data:function(){return{email:"",isEmailSent:!1,loading:!1}},methods:{checkEmailVerified:function(){var e=this;this.$validator.validateAll().then(function(t){t&&(e.loading=!0,f.post("/passwordreset",{emailAddress:e.email}).then(function(t){e.loading=!1,e.isEmailSent=!0}).catch(function(t){e.loading=!1}))})},changePassword:function(){var e=navigator.userAgent||navigator.vendor||window.opera;/android/i.test(e)?window.open("intent://app.commons.love/#Intent;scheme=launch;package=app.commons.love;S.content=WebContent;end"):/iPad|iPhone|iPod/.test(e)&&!window.MSStream?window.open("commonsCustonUrl://"):window.$router.push("/login")}}},tt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[e.isEmailSent?e._e():a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card-text",[a("p",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.$t("PasswordResetEmail.emailHint"))+"\n                ")])]),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"prepend-icon":"email",label:e.$t("PasswordResetEmail.emailAddress"),type:"text","error-messages":e.errors.collect("email"),"data-vv-name":"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-btn",{attrs:{color:"primary",type:"submit",disabled:e.loading},on:{click:function(t){e.checkEmailVerified()}}},[e._v(e._s(e.$t("EmailVerification.ok")))])],1)],1)],1),e._v(" "),e.isEmailSent?a("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card-text",[a("p",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.$t("PasswordResetEmail.emailSent"))+"\n                ")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-btn",{attrs:{color:"primary",type:"submit"},on:{click:function(t){e.changePassword()}}},[e._v(e._s(e.$t("EmailVerification.startApp")))])],1)],1)],1):e._e()],1)},staticRenderFns:[]},at=a("VU/8")(et,tt,!1,null,null,null).exports,st={name:"PasswordResetInput",props:["accessId"],data:function(){return{isPassSent:!1,password:null,password2:null,hidePassword:!0,loading:!1}},methods:{checkEmailVerified:function(){var e=this;this.$validator.validateAll().then(function(t){t&&(f.post("/passwordreset/"+e.accessId,{accessId:e.accessId,newPassword:e.password}).then(function(t){e.loading=!1}).catch(function(t){e.loading=!1}),e.isPassSent=!0)})},startApp:function(){var e=navigator.userAgent||navigator.vendor||window.opera;/android/i.test(e)?window.open("intent://app.commons.love/#Intent;scheme=launch;package=app.commons.love;S.content=WebContent;end"):/iPad|iPhone|iPod/.test(e)&&!window.MSStream?window.open("commonsCustonUrl://"):window.$router.push("/login")}}},rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[e.isPassSent?e._e():a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card-text",[a("p",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.$t("PasswordResetInput.inputHint"))+"\n                ")])]),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],staticStyle:{"margin-top":"16px"},attrs:{"prepend-icon":"lock",label:e.$t("PasswordResetInput.pass"),"error-messages":e.errors.collect("password"),hint:e.$t("CreateAccount.passwordHint"),"append-icon":e.hidePassword?"visibility":"visibility_off","append-icon-cb":function(){return e.hidePassword=!e.hidePassword},type:e.hidePassword?"password":"text",counter:"50",name:"password","data-vv-name":"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],attrs:{"prepend-icon":"lock",label:e.$t("PasswordResetInput.passConfirm"),"error-messages":e.errors.collect("password2"),hint:e.$t("CreateAccount.password2Hint"),"append-icon":e.hidePassword?"visibility":"visibility_off","append-icon-cb":function(){return e.hidePassword=!e.hidePassword},type:e.hidePassword?"password":"text",counter:"50","data-vv-name":"password2"},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),e._v(" "),a("v-card-actions",{staticStyle:{"justify-content":"center","margin-top":"16px"}},[a("v-btn",{attrs:{color:"primary",type:"submit",disabled:e.loading},on:{click:function(t){e.checkEmailVerified()}}},[e._v(e._s(e.$t("EmailVerification.ok")))])],1)],1)],1),e._v(" "),e.isPassSent?a("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card-text",[a("p",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.$t("PasswordResetInput.resetHint"))+"\n                ")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-btn",{attrs:{color:"primary",type:"submit"},on:{click:function(t){e.startApp()}}},[e._v(e._s(e.$t("EmailVerification.startApp")))])],1)],1)],1):e._e()],1)},staticRenderFns:[]},nt=a("VU/8")(st,rt,!1,null,null,null).exports;s.a.use(S.a);var it=new S.a({mode:"history",routes:[{path:"/",redirect:"/community"},{path:"/wallet",component:he},{path:"/community",component:ke},{path:"/community/ad/:id",component:me,props:!0},{path:"/community/ads/create",component:ke},{path:"/community/my-ads",component:ke},{path:"/messages",component:je},{path:"/messages/:threadId",component:ae,props:!0},{path:"/profile",component:Te},{path:"/profile/edit",component:He},{path:"/profile/:userId/:communityId/:adId",component:Se,props:!0},{path:"/admin",component:qe},{path:"/login",component:q},{path:"/create-account",component:De},{path:"/email-verification",component:We},{path:"/create-account/:accessId",component:Ke,props:!0},{path:"/passwordresetemail",component:at},{path:"/passwordreset/:accessId",component:nt,props:!0},{path:"/users/:id/emailaddress/:accessId",component:Ze,props:!0},{path:"*",redirect:"/"}]}),ot=a("mjDs"),lt=a.n(ot),ct=(a("QCv7"),a("MXkr"),a("3EgV")),dt=a.n(ct),ut={user:null,registrationId:null,registerDeviceOnBackend:function(){f.post("/users/"+this.user.id+"/mobile-device",{pushNotificationToken:this.registrationId})},onUserChanged:function(e){this.user=e,e&&this.registrationId&&this.registerDeviceOnBackend()},onDeviceReady:function(){var e=this,t=PushNotification.init({android:{},ios:{alert:"true",badge:!0,sound:"false"}});t.on("registration",function(t){e.registrationId=t.registrationId,e.user&&e.registerDeviceOnBackend()}),t.on("notification",function(e){if("new_message"===e.additionalData.type){var t=e.additionalData.threadId;it.currentRoute.path&&it.currentRoute.path==="/messages/"+t||u(e.message)}else u(e.message)})},init:function(){this.user=b.user(),n.$on("userChanged",this.onUserChanged.bind(this)),document.addEventListener("deviceready",this.onDeviceReady.bind(this),!1)}},mt=a("ujXI"),vt=a.n(mt),pt=a("sbrb"),ht=a.n(pt);s.a.use(dt.a),s.a.use(r.a,{i18n:v}),s.a.use(lt.a),s.a.use(vt.a),s.a.config.productionTip=!1,window.$vm=new s.a({el:"#app",router:it,i18n:v,components:{App:N},template:"<App/>"}),window.$router=it,window.EXIF=ht.a,ut.init(),window.confirm=function(e){var t=document.createElement("IFRAME");t.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(t);var a=window.frames[0].window.confirm(e);return t.parentNode.removeChild(t),a}},QCv7:function(e,t){},c7wr:function(e,t){},iF5I:function(e,t){},pWNq:function(e,t){},uslO:function(e,t,a){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function r(e){return a(n(e))}function n(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.590cbe3b4edd39d0e086.js.map